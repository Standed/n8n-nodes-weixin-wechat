# 📱 微信公众号模板消息配置详细指南

## 🎯 您需要获取的模板ID

### 第一步：登录公众号后台
1. 访问：https://mp.weixin.qq.com
2. 使用您的公众号管理员微信扫码登录

### 第二步：找到模板消息功能
**路径1（推荐）：**
- 左侧菜单 → **功能** → **模板消息**

**路径2（如果没有看到）：**
- 左侧菜单 → **功能** → **添加功能插件**
- 找到 **模板消息** 并开通

### 第三步：添加模板消息
1. 点击 **添加模板**
2. 在模板库中选择合适的模板，推荐：

**推荐模板类型：**
- **系统通知类**
- **服务通知类** 
- **会员通知类**

**推荐格式（寻找类似的模板）：**
```
{{first.DATA}}
时间：{{keyword1.DATA}}
内容：{{keyword2.DATA}}
{{remark.DATA}}
```

### 第四步：获取模板ID
1. 添加模板后，在 **我的模板** 中查看
2. 每个模板都有一个 **模板ID**，格式类似：
   ```
   abc123xyz456def789
   ```
3. 复制这个模板ID

### 第五步：配置到系统
在 `.env` 文件中替换：
```env
WECHAT_OFFICIAL_TEMPLATE_ID=你复制的模板ID
```

## 🧪 测试步骤

配置完成后，重启服务测试：

```bash
# 测试公众号消息发送
curl -X POST http://localhost:3000/send/text \
  -H "Content-Type: application/json" \
  -H "x-api-key: unified-message-key-2024" \
  -d '{
    "service": "wechat-official-account",
    "title": "来自您的公众号",
    "text": "这是通过您自己的公众号发送的测试消息！"
  }'
```

## ⚠️ 可能遇到的问题

### 问题1：没有看到"模板消息"菜单
**解决**：需要先开通模板消息功能插件

### 问题2：IP白名单限制
**解决**：在公众号后台添加服务器IP `183.17.125.168` 到白名单

### 问题3：没有合适的模板
**可选模板类型：**
- 业务通知
- 账户变动通知  
- 服务预约成功通知
- 审核结果通知
- 订单状态通知

## 💡 公众号推送的优势

✅ **完全属于您** - 用户关注您的公众号  
✅ **专业推送** - 模板消息格式美观  
✅ **用户积累** - 为您积累粉丝  
✅ **无限制** - 不受第三方服务限制  

获取模板ID后，您就可以通过自己的公众号发送专业推送消息了！